---
/**
 * Standardized Hero Component
 * 
 * World-class hero section that maintains consistency across all pages.
 * Based on the homepage hero design but adaptable for different page types.
 * 
 * Props:
 * - title: Main hero title (required)
 * - subtitle: Hero subtitle/description (optional)
 * - breadcrumbs: Breadcrumb navigation array (optional)
 * - showZipSearch: Whether to show ZIP code input (default: false)
 * - variant: 'homepage' | 'interior' | 'minimal' (default: 'interior')
 * - backgroundOverlay: Custom background overlay opacity (default: 0.3)
 * - customClass: Additional CSS classes
 */

import StandardZipInput from './StandardZipInput.astro';

export interface Props {
  title: string;
  subtitle?: string;
  breadcrumbs?: Array<{label: string, href?: string}>;
  showZipSearch?: boolean;
  variant?: 'homepage' | 'interior' | 'minimal';
  backgroundOverlay?: number;
  customClass?: string;
}

const { 
  title,
  subtitle,
  breadcrumbs = [],
  showZipSearch = false,
  variant = 'interior',
  backgroundOverlay = 0.3,
  customClass = ''
} = Astro.props;

// Variant configurations
const variants = {
  homepage: {
    minHeight: 'min-h-[90vh]',
    padding: 'py-32',
    titleSize: 'text-5xl md:text-7xl lg:text-8xl',
    subtitleSize: 'text-2xl md:text-3xl',
    showAnimations: true
  },
  interior: {
    minHeight: 'min-h-[50vh]',
    padding: 'py-20',
    titleSize: 'text-4xl md:text-5xl lg:text-6xl',
    subtitleSize: 'text-xl md:text-2xl',
    showAnimations: false
  },
  minimal: {
    minHeight: 'min-h-[30vh]',
    padding: 'py-12',
    titleSize: 'text-3xl md:text-4xl lg:text-5xl',
    subtitleSize: 'text-lg md:text-xl',
    showAnimations: false
  }
};

const config = variants[variant];
---

<section class={`relative ${config.minHeight} flex items-center justify-center bg-gradient-to-br from-texas-navy via-blue-900 to-texas-navy overflow-hidden ${customClass}`}>
  <!-- Background Elements -->
  <div class="absolute inset-0">
    <div class={`absolute inset-0 bg-black/${Math.round(backgroundOverlay * 100)}`}></div>
    {config.showAnimations && (
      <>
        <div class="absolute top-0 left-1/4 w-96 h-96 bg-texas-gold/10 rounded-full blur-3xl animate-pulse"></div>
        <div class="absolute bottom-0 right-1/4 w-80 h-80 bg-texas-red/10 rounded-full blur-3xl animate-pulse delay-1000"></div>
      </>
    )}
  </div>
  
  <!-- Content Container -->
  <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
    <div class={`${config.padding} text-center space-y-8`}>
      
      <!-- Breadcrumbs (Interior pages only) -->
      {breadcrumbs.length > 0 && variant !== 'homepage' && (
        <nav class="text-blue-200 text-sm mb-6">
          <div class="flex items-center justify-center gap-2 flex-wrap">
            {breadcrumbs.map((crumb, index) => (
              <div key={index} class="flex items-center gap-2">
                {crumb.href ? (
                  <a href={crumb.href} class="hover:text-white transition-colors">
                    {crumb.label}
                  </a>
                ) : (
                  <span class="text-white font-medium">{crumb.label}</span>
                )}
                {index < breadcrumbs.length - 1 && <span class="text-blue-300">/</span>}
              </div>
            ))}
          </div>
        </nav>
      )}
      
      <!-- Hero Content -->
      <div class="space-y-6">
        <h1 class={`${config.titleSize} font-extrabold text-white leading-none tracking-tight`}>
          <Fragment set:html={title} />
        </h1>
        
        {subtitle && (
          <p class={`${config.subtitleSize} text-white/90 font-light max-w-5xl mx-auto leading-relaxed`}>
            <Fragment set:html={subtitle} />
          </p>
        )}
        
        <!-- ZIP Search (if enabled) -->
        {showZipSearch && (
          <div class="max-w-2xl mx-auto">
            <StandardZipInput 
              variant="hero" 
              size="lg"
              customClass="transform hover:scale-105 transition-all duration-300"
            />
          </div>
        )}
      </div>
      
      <!-- Trust Indicators (Homepage variant only) -->
      {variant === 'homepage' && (
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto mt-12">
          <div class="bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20">
            <div class="flex items-center justify-center gap-3 text-white">
              <div class="w-3 h-3 bg-texas-gold rounded-full animate-pulse"></div>
              <span class="font-semibold">Licensed providers only</span>
            </div>
          </div>
          <div class="bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20">
            <div class="flex items-center justify-center gap-3 text-white">
              <div class="w-3 h-3 bg-texas-gold rounded-full animate-pulse delay-300"></div>
              <span class="font-semibold">Free & takes 10 minutes</span>
            </div>
          </div>
          <div class="bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20">
            <div class="flex items-center justify-center gap-3 text-white">
              <div class="w-3 h-3 bg-texas-gold rounded-full animate-pulse delay-700"></div>
              <span class="font-semibold">Real prices, no surprises</span>
            </div>
          </div>
        </div>
      )}
    </div>
  </div>
  
  <!-- Scroll indicator (Interior pages) -->
  {variant === 'interior' && (
    <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 text-white/60 animate-bounce">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
      </svg>
    </div>
  )}
</section>

<style>
  /* Ensure proper contrast and readability */
  h1 {
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  }
  
  p {
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
  }
  
  /* Enhanced animations for homepage variant */
  @keyframes pulse-soft {
    0%, 100% { opacity: 0.6; transform: scale(1); }
    50% { opacity: 0.8; transform: scale(1.05); }
  }
  
  .animate-pulse {
    animation: pulse-soft 3s ease-in-out infinite;
  }
  
  .delay-300 {
    animation-delay: 0.3s;
  }
  
  .delay-700 {
    animation-delay: 0.7s;
  }
  
  .delay-1000 {
    animation-delay: 1s;
  }
</style>