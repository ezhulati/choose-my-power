---
import Layout from '../../../layouts/Layout.astro';
import { ProductDetailsPageShadcn } from '../../../components/ui/ProductDetailsPageShadcn';

export async function getStaticPaths() {
  // This will be populated with actual plan data during build
  return [
    // Example paths - replace with actual data
    { params: { provider: 'reliant-energy', plan: 'secure-advantage-12' } },
    { params: { provider: 'txu-energy', plan: 'electric-freedom-24' } },
  ];
}

const { provider, plan } = Astro.params;

// Mock plan data - replace with actual API call
const planData = {
  id: 'secure-advantage-12',
  name: 'Secure Advantage 12',
  provider: {
    name: 'Reliant Energy',
    slug: 'reliant-energy',
    logo: '/images/providers/reliant.png',
    rating: 4.2,
    reviews: 28431,
    description: 'One of Texas\' largest electricity providers with 20+ years of experience.'
  },
  rate: 12.4,
  type: 'fixed',
  termLength: 12,
  renewablePercent: 35,
  fees: {
    monthlyFee: 9.95,
    cancellationFee: 175,
    connectionFee: 0,
    depositRequired: false
  },
  features: [
    'Fixed rate for entire contract',
    'Online account management',
    'Paperless billing discount',
    'Mobile app included',
    '24/7 customer support',
    'No deposit required'
  ],
  highlights: [
    'Most popular 12-month plan',
    'Price protection guarantee',
    'No surprise rate changes'
  ],
  availability: {
    cities: ['Dallas', 'Houston', 'Austin', 'San Antonio', 'Fort Worth'],
    zipCodes: ['75001', '75002', '77001', '78701'],
    tdsp: ['Oncor', 'CenterPoint Energy']
  }
};

const title = `${planData.name} by ${planData.provider.name} - Full Plan Details | ChooseMyPower`;
const description = `Complete details for ${planData.name}: ${planData.rate}Â¢/kWh fixed rate, ${planData.termLength}-month term. Compare features, read reviews, and sign up today.`;
---

<Layout title={title} description={description}>
  <ProductDetailsPageShadcn planData={planData} client:load />
</Layout>