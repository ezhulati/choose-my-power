---
/**
 * Electricity Plans Page - Browse All Texas Plans
 * Professional design using shadcn components and Texas flag design system
 * Mobile-first responsive layout with enhanced UX
 */

import Layout from '../layouts/Layout.astro';
import HeroBackground from '../components/HeroBackground.astro';
import { ZipCodeSearch } from '../components/ZipCodeSearch';
import { Badge } from '../components/ui/badge';
import { Button } from '../components/ui/button';
import { Card, CardContent, CardHeader, CardTitle } from '../components/ui/card';
import { Input } from '../components/ui/input';
import { EnterprisePlanCard } from '../components/ui/EnterprisePlanCard';
import { getCredibleMarketingText, DEFAULT_COUNTS } from '../lib/utils/dynamic-counts';

const title = "Texas Electricity Plans - Compare Real Rates & Find Your Best Deal";
const marketingText = getCredibleMarketingText(DEFAULT_COUNTS.providers, DEFAULT_COUNTS.plans);
const description = `Compare real electricity rates from ${DEFAULT_COUNTS.providerText} across Texas. No hidden fees, no teaser rates - just honest pricing to help you find the best electricity plan for your home.`;

// Professional plan data for EnterprisePlanCard component
const samplePlans = [
  {
    id: "1",
    name: "Pollution Free e-Plus 12",
    provider: "Green Mountain Energy",
    rate: 8.9,
    contractTerm: "12 months",
    planType: "fixed" as const,
    greenEnergy: true,
    noDeposit: true,
    topRated: false,
    features: ["100% Renewable", "No Deposit", "Fixed Rate"],
    slug: "pollution-free-e-plus-12"
  },
  {
    id: "2",
    name: "Free Nights & Weekends 12",
    provider: "TXU Energy",
    rate: 15.2,
    contractTerm: "12 months",
    planType: "variable" as const,
    greenEnergy: false,
    noDeposit: false,
    topRated: true,
    features: ["Free Nights", "Weekend Rewards", "Time of Use"],
    slug: "free-nights-weekends-12"
  },
  {
    id: "3",
    name: "Simply Secure 24",
    provider: "Direct Energy",
    rate: 11.4,
    contractTerm: "24 months",
    planType: "fixed" as const,
    greenEnergy: false,
    noDeposit: false,
    topRated: false,
    features: ["Long Term", "Rate Lock", "Stable Pricing"],
    slug: "simply-secure-24"
  }
];
---

<Layout title={title} description={description}>
  <main class="min-h-screen bg-background">
    <!-- Elegant Hero Section - Minimalist Design -->
    <section class="bg-gradient-to-br from-texas-navy via-blue-800 to-texas-navy">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16 lg:py-20 text-center">
        <Badge variant="texas-accent" className="mb-6 text-sm px-4 py-2">
          All Texas Plans
        </Badge>
        
        <!-- Refined Typography - Matching Homepage Proportions -->
        <div class="space-y-4">
          <h1 class="text-4xl md:text-5xl lg:text-6xl font-semibold text-white leading-tight max-w-4xl mx-auto">
            Texas Electricity Plans with Real Rates
          </h1>
          
          <p class="text-base md:text-lg text-blue-100/80 font-normal max-w-3xl mx-auto leading-relaxed">
            You've seen the "6.9¢" rates that cost 14¢. We show actual monthly costs from 
            <span class="text-white font-medium">{DEFAULT_COUNTS.providerText} across {DEFAULT_COUNTS.cities}+ Texas cities.</span>
          </p>
          
          <div class="bg-white/10 backdrop-blur-sm rounded-lg p-4 max-w-2xl mx-auto border border-white/20">
            <p class="text-sm text-white/90 font-normal">
              <span class="text-texas-gold font-medium">Real pricing, no teaser rates.</span> 
              Find your best electricity plan in minutes.
            </p>
          </div>
        </div>

        <!-- Refined Search Input -->
        <div class="max-w-md mx-auto mt-8">
          <ZipCodeSearch 
            client:load
            placeholder="Enter your ZIP code to see plans"
            className="w-full"
          />
        </div>
      </div>
    </section>

    <!-- Search and Filter Section using shadcn Card -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <Card variant="elevated" className="mb-8">
        <CardContent className="p-6">
          <div class="flex flex-col lg:flex-row gap-4 mb-6">
            <div class="flex-1 relative">
              <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
              </svg>
              <Input placeholder="Search plans by name or provider..." className="pl-10" />
            </div>
            <Button variant="texas-primary" size="lg">
              <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.121A1 1 0 013 6.414V4z" />
              </svg>
              Advanced Filters
            </Button>
          </div>
          
          <div class="flex flex-wrap gap-3">
            <Badge variant="texas-outline" className="cursor-pointer">Fixed Rate Plans</Badge>
            <Badge variant="success" className="cursor-pointer">100% Renewable</Badge>
            <Badge variant="texas-accent" className="cursor-pointer">No Deposit Required</Badge>
            <Badge variant="info" className="cursor-pointer">Free Nights & Weekends</Badge>
            <Badge variant="outline" className="cursor-pointer">12 Month Terms</Badge>
          </div>
        </CardContent>
      </Card>

      <!-- Elegant Results Summary -->
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8 py-4">
        <div>
          <h2 class="text-xl md:text-2xl font-semibold text-foreground mb-2">347 Plans Available</h2>
          <p class="text-sm text-muted-foreground">Real rates from Texas electricity providers</p>
        </div>
        <div class="flex items-center gap-4 mt-4 sm:mt-0">
          <span class="text-sm font-medium text-muted-foreground">Sort by:</span>
          <select class="border border-input rounded-lg px-4 py-2 text-sm bg-background shadow-sm hover:border-texas-navy transition-colors">
            <option>Lowest Rate First</option>
            <option>Highest Customer Rating</option>
            <option>Shortest Contract Term</option>
            <option>Most Popular Plans</option>
            <option>100% Green Energy</option>
          </select>
        </div>
      </div>

      <!-- Professional Plan Cards Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {samplePlans.map((plan) => (
          <EnterprisePlanCard 
            key={plan.id} 
            plan={plan} 
            client:load
            className="h-full"
          />
        ))}
      </div>

      <!-- Load More -->
      <div class="text-center mt-12">
        <Button variant="texas-accent" size="xl">
          <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
          </svg>
          Load More Plans (344 remaining)
        </Button>
        <p class="text-sm text-muted-foreground mt-3">
          Showing 3 of 347 available plans • Updated in real-time
        </p>
      </div>
    </div>

    <!-- Elegant CTA Section -->
    <div class="bg-gradient-to-br from-gray-50 to-white border border-gray-200 rounded-xl mx-4 sm:mx-6 lg:mx-8 mb-8">
      <div class="py-12 lg:py-16 px-6 lg:px-8 text-center">
        <h2 class="text-xl md:text-2xl font-semibold text-texas-navy mb-4">
          Still Need Help Finding the Right Plan?
        </h2>
        <p class="text-base text-muted-foreground mb-8 max-w-2xl mx-auto leading-relaxed">
          Texas electricity is intentionally complicated. We've figured out the system. 
          <span class="text-foreground font-medium">Get honest guidance from someone who won't try to sell you anything.</span>
        </p>
        
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <Button variant="texas-primary" size="default">Get Expert Help</Button>
          <Button variant="outline" size="default">View Comparison Guide</Button>
        </div>
      </div>
    </div>
  </main>
</Layout>