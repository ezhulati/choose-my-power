---
import Layout from '../layouts/Layout.astro';
import StandardZipInput from '../components/StandardZipInput.astro';
import { Zap, Shield, DollarSign, Clock, MapPin, Calculator, Leaf, Users, TrendingDown, Battery, Award, BarChart, Star, ArrowRight } from 'lucide-react';
import { getCredibleMarketingText, DEFAULT_COUNTS, getRealTimeLowestRate } from '../lib/utils/dynamic-counts';
import { DynamicHeroMessaging } from '../components/DynamicHeroMessaging';

// Get the actual lowest rate available
const lowestRate = await getRealTimeLowestRate();

const title = "Compare Texas Electricity Plans & Find Your Best Rate | ChooseMyPower.org";
const description = `No more "${lowestRate}¢" rates that cost 14¢. No more 40-page contracts. Clear prices and straight answers from someone who's figured this out. Whether you're moving tomorrow or your rate just jumped, we'll get you sorted in 10 minutes.`;

// Homepage uses gradient background - no hero image needed
---

<Layout title={title} description={description} ogImage="/images/og/comprehensive-clean/homepage_hero_clean_16x9.png">
  <!-- Font preloading handled in Layout.astro to avoid duplication -->
  <!-- Organization and Website Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": ["Organization", "WebSite"],
    "name": "ChooseMyPower.org",
    "description": `No more "${lowestRate}¢" rates that cost 14¢. No more 40-page contracts. Clear prices and straight answers from someone who's figured this out. Whether you're moving tomorrow or your rate just jumped, we'll get you sorted in 10 minutes.`,
    "url": "https://choosemypower.org",
    "logo": "https://choosemypower.org/images/og-default.jpg",
    "sameAs": [
      "https://twitter.com/choosemypower"
    ],
    "contactPoint": {
      "@type": "ContactPoint",
      "contactType": "customer service",
      "areaServed": "Texas, US"
    },
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://choosemypower.org/texas/{search_term_string}",
      "query-input": "required name=search_term_string"
    },
    "serviceArea": {
      "@type": "State",
      "name": "Texas"
    }
  }
  </script>

  <div class="bg-white">
    <!-- WORLD-CLASS HERO SECTION - Best-in-Class Design -->
    <section class="relative min-h-[90vh] flex items-center justify-center bg-gradient-to-br from-texas-navy via-blue-900 to-texas-navy overflow-hidden">
      <!-- Advanced Background Elements -->
      <div class="absolute inset-0">
        <div class="absolute inset-0 bg-gradient-to-r from-black/30 via-transparent to-black/30"></div>
        <div class="absolute top-0 left-1/4 w-96 h-96 bg-texas-gold/10 rounded-full blur-3xl animate-pulse"></div>
        <div class="absolute bottom-0 right-1/4 w-80 h-80 bg-texas-red/10 rounded-full blur-3xl animate-pulse delay-1000"></div>
      </div>
      
      <!-- Content Container -->
      <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <div class="space-y-4">
          <!-- Dynamic Temporal Headlines -->
          <DynamicHeroMessaging client:load />
          
          <!-- Enhanced ZIP Code Search -->
          <div class="space-y-8">
            <StandardZipInput 
              variant="hero" 
              size="lg"
              showTitle={false}
              showDescription={false}
              showStats={false}
              customClass="transform hover:scale-105 transition-all duration-300"
            />
            
            <!-- Trust Signals - Redesigned -->
            <div class="flex flex-wrap items-center justify-center gap-4 text-center text-white/50 text-xs max-w-md mx-auto">
              <span>{DEFAULT_COUNTS.planText} from licensed companies</span>
              <span>Free & takes 10 minutes</span>
              <span>Real prices, no surprises</span>
            </div>
          </div>
          
          <!-- Social Proof Indicator -->
          <div class="text-blue-200 text-lg">
            <span class="inline-flex items-center gap-2">
              <span class="flex -space-x-2">
                <div class="w-8 h-8 bg-texas-gold rounded-full border-2 border-white"></div>
                <div class="w-8 h-8 bg-texas-red rounded-full border-2 border-white"></div>
                <div class="w-8 h-8 bg-blue-500 rounded-full border-2 border-white"></div>
                <div class="w-8 h-8 bg-texas-navy rounded-full border-2 border-white flex items-center justify-center text-xs text-white font-bold">+</div>
              </span>
              Join thousands of Texans who've already found better rates
            </span>
          </div>
        </div>
      </div>
      
      <!-- Scroll indicator -->
      <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 text-white/60 animate-bounce">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
        </svg>
      </div>
    </section>

    <!-- How It Works - Enhanced 3-Step Process -->
    <section class="py-24 bg-gradient-to-b from-gray-50 via-white to-gray-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
          <h2 class="text-2xl md:text-3xl font-semibold text-texas-navy mb-6">
            Texas Gives You Choice. We Handle the Homework.
          </h2>
          <p class="text-base md:text-lg text-gray-600 max-w-2xl mx-auto leading-relaxed">
            {DEFAULT_COUNTS.providers} companies competing for your business. Real competition means better rates. The comparing part? We already did that work.
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
          <!-- Step 1 -->
          <div class="text-center">
            <div class="w-20 h-20 bg-texas-red rounded-full flex items-center justify-center mx-auto mb-6">
              <span class="text-2xl font-bold text-white">1</span>
            </div>
            <h3 class="text-2xl font-bold text-texas-navy mb-4">Enter Your ZIP</h3>
            <p class="text-gray-600 leading-relaxed">
              See which companies compete in your area. (Most states get just one choice.)
            </p>
          </div>

          <!-- Step 2 -->
          <div class="text-center">
            <div class="w-20 h-20 bg-texas-red rounded-full flex items-center justify-center mx-auto mb-6">
              <span class="text-2xl font-bold text-white">2</span>
            </div>
            <h3 class="text-2xl font-bold text-texas-navy mb-4">Skip the Spreadsheets</h3>
            <p class="text-gray-600 leading-relaxed">
              We already calculated what each plan actually costs. No fine print math required.
            </p>
          </div>

          <!-- Step 3 -->
          <div class="text-center">
            <div class="w-20 h-20 bg-texas-red rounded-full flex items-center justify-center mx-auto mb-6">
              <span class="text-2xl font-bold text-white">3</span>
            </div>
            <h3 class="text-2xl font-bold text-texas-navy mb-4">Pick Your Winner</h3>
            <p class="text-gray-600 leading-relaxed">
              Choose from the best options. Your freedom, your choice, your savings.
            </p>
          </div>
        </div>

        <!-- Two-Column Critical Information -->
        <div class="mt-12 mb-8 bg-texas-gold-50 rounded-xl p-8 border border-texas-gold-200">
          <div class="grid md:grid-cols-2 gap-8">
            <!-- Column 1: Moving Advice -->
            <div class="bg-white rounded-lg p-6 shadow-sm">
              <h3 class="text-xl font-bold text-texas-navy mb-4">Moving? Don't Transfer Your Old Plan</h3>
              <p class="text-gray-700 leading-relaxed mb-4">
                <strong>Here's why transferring is usually a mistake:</strong>
              </p>
              <ul class="text-gray-700 leading-relaxed space-y-2 mb-4">
                <li class="flex items-start gap-2">
                  <span class="text-texas-gold mt-1">•</span>
                  <span>Your current plan's price is based on your OLD home's usage</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="text-texas-gold mt-1">•</span>
                  <span>'Fixed rate' is misleading - it's actually a formula that changes based on how much electricity you use</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="text-texas-gold mt-1">•</span>
                  <span>A plan that works for a 2-bedroom apartment will cost way more in a 4-bedroom house (or vice versa)</span>
                </li>
              </ul>
              <p class="text-gray-700 leading-relaxed font-semibold">
                Let's find a plan that matches your NEW home instead. Takes the same 10 minutes as transferring, saves you money.
              </p>
            </div>
            
            <!-- Column 2: Contract Expiration Advice -->
            <div class="bg-white rounded-lg p-6 shadow-sm">
              <h3 class="text-xl font-bold text-texas-navy mb-4">Contract Expiring? Don't Go on Holdover</h3>
              <p class="text-gray-700 leading-relaxed mb-4">
                <strong>If you're on a holdover rate, shop now:</strong>
              </p>
              <ul class="text-gray-700 leading-relaxed space-y-2 mb-4">
                <li class="flex items-start gap-2">
                  <span class="text-texas-red mt-1">•</span>
                  <span>Anything will be cheaper than the holdover rate you're on</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="text-texas-red mt-1">•</span>
                  <span>In Texas, you have 14 days before your contract expires to switch without penalty</span>
                </li>
                <li class="flex items-start gap-2">
                  <span class="text-texas-red mt-1">•</span>
                  <span>Shop for a new plan every time your contract expires - don't renew</span>
                </li>
              </ul>
              <p class="text-gray-700 leading-relaxed font-semibold">
                Best way to save: shop every contract expiration. Never let your plan expire and go on holdover.
              </p>
            </div>
          </div>
        </div>

      </div>
    </section>

    <!-- Conversational Path Selector -->
    <section class="py-20 bg-gradient-to-b from-texas-cream/30 to-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
          <h2 class="text-2xl md:text-3xl font-semibold text-texas-navy mb-6">
            Your Situation. Our Research.
          </h2>
          <p class="text-base md:text-lg text-gray-600 max-w-2xl mx-auto leading-relaxed">
            Texas gives you choices other states don't get. The tedious part? Comparing them all. We skip straight to what matters for your situation.
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
          <!-- Moving -->
          <div class="bg-white rounded-xl shadow-md p-6 text-center border-2 border-transparent hover:border-texas-red/30 hover:shadow-lg transition-all">
            <div class="w-16 h-16 bg-texas-red/10 rounded-full flex items-center justify-center mx-auto mb-4">
              <MapPin className="w-8 h-8 text-texas-red" />
            </div>
            <div class="bg-texas-red text-white px-4 py-2 rounded-full text-sm font-semibold mb-3">
              I'm moving
            </div>
            <p class="text-gray-600 text-sm leading-relaxed">
              Welcome to Texas electricity freedom. Your new home needs a plan that matches its actual usage, not your old one.
            </p>
          </div>

          <!-- High Bill -->
          <div class="bg-white rounded-xl shadow-md p-6 text-center border-2 border-transparent hover:border-texas-gold/50 hover:shadow-lg transition-all">
            <div class="w-16 h-16 bg-texas-gold/10 rounded-full flex items-center justify-center mx-auto mb-4">
              <DollarSign className="w-8 h-8 text-texas-gold" />
            </div>
            <div class="bg-texas-gold text-white px-4 py-2 rounded-full text-sm font-semibold mb-3">
              My bill's too high
            </div>
            <p class="text-gray-600 text-sm leading-relaxed">
              That sinking feeling when you open the bill? Let's see what you should actually be paying.
            </p>
          </div>

          <!-- Contract Ending -->
          <div class="bg-white rounded-xl shadow-md p-6 text-center border-2 border-transparent hover:border-texas-navy/30 hover:shadow-lg transition-all">
            <div class="w-16 h-16 bg-texas-navy/10 rounded-full flex items-center justify-center mx-auto mb-4">
              <Clock className="w-8 h-8 text-texas-navy" />
            </div>
            <div class="bg-texas-navy text-white px-4 py-2 rounded-full text-sm font-semibold mb-3">
              Contract ending soon
            </div>
            <p class="text-gray-600 text-sm leading-relaxed">
              Got that renewal notice? Good timing. Let's find you something better before auto-renewal hits.
            </p>
          </div>

          <!-- Need $0 Deposit -->
          <div class="bg-white rounded-xl shadow-md p-6 text-center border-2 border-transparent hover:border-green-500/30 hover:shadow-lg transition-all">
            <div class="w-16 h-16 bg-green-500/10 rounded-full flex items-center justify-center mx-auto mb-4">
              <Shield className="w-8 h-8 text-green-600" />
            </div>
            <div class="bg-green-600 text-white px-4 py-2 rounded-full text-sm font-semibold mb-3">
              Need $0 deposit
            </div>
            <p class="text-gray-600 text-sm leading-relaxed">
              Why tie up money in deposits when you need it elsewhere? We'll find options that work for you.
            </p>
          </div>
        </div>

        <!-- Single ZIP Entry Below All Cards -->
        <div class="text-center">
          <h3 class="text-xl font-semibold text-texas-navy mb-6">Get Started With Any Situation Above</h3>
          <StandardZipInput 
            variant="inline" 
            size="lg"
            showTitle={false}
            showDescription={false}
            showStats={false}
            customClass="max-w-lg mx-auto"
          />
        </div>

      </div>
    </section>

    <!-- Why This Matters - Transformation Messaging -->
    <section class="py-20 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">


      </div>
    </section>

    <!-- Micro-Lessons Section -->
    <section class="py-20 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
          <h2 class="text-2xl md:text-3xl font-semibold text-texas-navy mb-4">
            Why Texas Electricity Is Different
          </h2>
          <p class="text-base md:text-lg text-gray-600 max-w-2xl mx-auto leading-relaxed">
            Most states get stuck with one utility. Texas gets choice. Here's why that matters and how it works.
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          <!-- What's a kWh? -->
          <div class="bg-white rounded-xl p-6 border-2 border-texas-red shadow-lg">
            <h3 class="text-xl font-bold text-texas-navy mb-3">What's a kWh?</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              Think of it like gas for your car. You pay per gallon of gas. You pay per kWh of electricity.
            </p>
            <p class="text-gray-700 leading-relaxed font-semibold">
              Average Texas home uses about 1,000 per month. Now let's find your price per "gallon."
            </p>
          </div>

          <!-- Why do rates vary? -->
          <div class="bg-texas-gold-50 rounded-xl p-6 border border-texas-gold-200">
            <h3 class="text-xl font-bold text-texas-navy mb-3">Why Do Rates Vary?</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              Competition. {DEFAULT_COUNTS.providers} companies fight for your business. Same electricity, different prices.
            </p>
            <p class="text-gray-700 leading-relaxed font-semibold">
              The coffee's identical, but one shop charges more. Let's find the shop that doesn't overcharge.
            </p>
          </div>

          <!-- Fixed vs Variable? -->
          <div class="bg-texas-navy/5 rounded-xl p-6 border border-texas-navy/10">
            <h3 class="text-xl font-bold text-texas-navy mb-3">Fixed vs Variable?</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              Fixed = your rate stays the same all year. Variable = your rate changes with the market.
            </p>
            <p class="text-gray-700 leading-relaxed font-semibold">
              Fixed is like locking in gas prices. Variable is like paying whatever's on the pump.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Social Proof & Trust Signals -->
    <section class="py-20 bg-gray-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
          <h2 class="text-2xl md:text-3xl font-semibold text-texas-navy mb-4">
            We Only Show You the Good Ones
          </h2>
          <p class="text-base md:text-lg text-gray-600">
            {DEFAULT_COUNTS.planText} from licensed electricity companies. No fly-by-night companies. No door-to-door scammers.
          </p>
        </div>

        <!-- Trust Indicators -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
          <div class="text-center">
            <div class="w-16 h-16 bg-texas-gold/10 rounded-full flex items-center justify-center mx-auto mb-4">
              <Shield className="w-8 h-8 text-texas-gold" />
            </div>
            <h3 class="font-bold text-texas-navy mb-2">Licensed & Regulated</h3>
            <p class="text-gray-600 text-sm">
              Every provider we work with is licensed by the Public Utility Commission of Texas
            </p>
          </div>
          <div class="text-center">
            <div class="w-16 h-16 bg-texas-navy/10 rounded-full flex items-center justify-center mx-auto mb-4">
              <Users className="w-8 h-8 text-texas-navy" />
            </div>
            <h3 class="font-bold text-texas-navy mb-2">Real Customer Reviews</h3>
            <p class="text-gray-600 text-sm">
              We show honest ratings from actual Texas customers, not fake testimonials
            </p>
          </div>
          <div class="text-center">
            <div class="w-16 h-16 bg-texas-red/10 rounded-full flex items-center justify-center mx-auto mb-4">
              <DollarSign className="w-8 h-8 text-texas-red" />
            </div>
            <h3 class="font-bold text-texas-navy mb-2">Always Free for You</h3>
            <p class="text-gray-600 text-sm">
              The electricity companies pay us when you sign up. You pay the same price either way, so why not get help?
            </p>
          </div>
        </div>

        <!-- Our Story - Trust Building -->
        <div class="bg-texas-cream-50 rounded-xl p-8 mb-8 border border-texas-cream-200">
          <div class="max-w-4xl mx-auto">
            <h3 class="text-2xl font-bold text-texas-navy mb-6 text-center">
              Why We Built This
            </h3>
            <div class="space-y-4 text-gray-700 leading-relaxed">
              <p>
                <strong>Back in 2009,</strong> we discovered firsthand how confusing electricity shopping in Texas could be. We had the power to choose, but using it effectively? That was hard.
              </p>
              <p>
                The bill came. Our "8.9¢" plan cost 16¢. We felt foolish. Then we realized – we weren't stupid. The system was just really complicated.
              </p>
              <p>
                So we built tools to help Texans like us use their power of choice effectively. Clear comparisons. Real prices. No confusion.
              </p>
              <p class="font-semibold text-center">
                Today, thousands of Texans use our tools every month. Not because we advertise. Because it works, and they tell their friends.
              </p>
            </div>
          </div>
        </div>

        <!-- Final CTA -->
        <div class="bg-texas-navy rounded-xl p-8 text-white text-center">
          <h3 class="text-2xl font-bold mb-4">
            Your Neighbors Are Saving Money Too
          </h3>
          <p class="text-blue-100 mb-6 max-w-2xl mx-auto">
            Join them. Enter your ZIP code above and see what's really available in your area.
          </p>
          <StandardZipInput 
            variant="compact" 
            size="md"
            showTitle={false}
            showDescription={false}
            showStats={false}
            customClass="max-w-sm mx-auto"
          />
        </div>
      </div>
    </section>
  </div>

  <!-- Backup ZIP lookup script in case StandardZipInput component doesn't load it -->
  <script src="/js/zip-lookup.js" defer></script>
</Layout>
