"use strict";(globalThis["webpackChunkorders_comparepower_com"]=globalThis["webpackChunkorders_comparepower_com"]||[]).push([[56],{5154:(e,l,a)=>{a.r(l),a.d(l,{default:()=>oe});a(2879);var t=a(9835),o=a(499),n=a(1957),s=a(6970),r=a(5979),i=a(1552);const c=e=>((0,t.dD)("data-v-7a98438c"),e=e(),(0,t.Cn)(),e),u={class:"text-bold"},d={class:"text-0875"},_=c((()=>(0,t._)("div",{class:"text-italic"},"Search and select your service address or ESIID to continue",-1)));function m(e,l,a,o,r,i){const c=(0,t.up)("q-icon"),m=(0,t.up)("q-item-section"),v=(0,t.up)("q-item"),p=(0,t.up)("q-spinner"),h=(0,t.up)("q-input"),b=(0,t.up)("q-list");return(0,t.wg)(),(0,t.iD)(t.HY,null,[o.service_location?((0,t.wg)(),(0,t.j4)(v,{key:0,class:"q-card--bordered q-py-md q-px-sm",clickable:"",onClick:o.remove_service_location},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{name:"pin_drop"})])),_:1}),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t._)("div",u,(0,s.zw)(o.service_location.label),1),(0,t._)("div",d,"ESIID: "+(0,s.zw)(o.service_location.esiid),1)])),_:1}),(0,t.Wm)(m,{avatar:"",class:"cursor-pointer"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{name:"delete",onClick:o.remove_service_location},null,8,["onClick"])])),_:1})])),_:1},8,["onClick"])):(0,t.kq)("",!0),(0,t.wy)((0,t._)("div",null,[(0,t.Wm)(h,{modelValue:o.search_text,"onUpdate:modelValue":l[0]||(l[0]=e=>o.search_text=e),"aria-autocomplete":"none",autocomplete:"off",outlined:"",onKeyup:o.search,onKeydown:[(0,n.D2)(o.next_item,["down"]),(0,n.D2)(o.previous_item,["up"]),(0,n.D2)(o.select_active_item,["tab"]),(0,n.D2)(o.select_active_item,["enter"])],ref:"search_input",placeholder:"Search and select your service address or ESIID to continue",onFocus:o.focus},{append:(0,t.w5)((()=>[o.is_loading?((0,t.wg)(),(0,t.j4)(p,{key:0})):(0,t.kq)("",!0),(0,t.Wm)(c,{name:"pin_drop"})])),_:1},8,["modelValue","onKeyup","onKeydown","onFocus"]),o.focused?((0,t.wg)(),(0,t.j4)(b,{key:0,separator:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{dense:"",class:"bg-grey-2"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[_])),_:1})])),_:1}),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(o.options,((e,l)=>((0,t.wg)(),(0,t.j4)(v,{clickable:"",active:o.is_active(l),onClick:l=>o.select_item(e),"active-class":"bg-blue-1"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(e?.label),1)])),_:2},1024)])),_:2},1032,["active","onClick"])))),256))])),_:1})):(0,t.kq)("",!0)],512),[[n.F8,!o.service_location]])],64)}var v=a(9676),p=a(3195);const h={name:"ServiceLocationPicker",props:{modelValue:{type:Object}},setup(e,{emit:l}){const{log_event:a}=(0,i.Z)(),{is_loading:n,search_service_locations:s,get_service_location_by_key:r}=(0,v.Z)(),{storage:c}=(0,p.Xs)("search_text",null),u=(0,o.iH)(null),d=(0,o.iH)(0),_=(0,o.iH)(null),m=(0,t.Fl)({get:()=>e.modelValue,set:e=>l("update:modelValue",e)}),h=e=>{m.value=e},b=()=>{m.value=null,x(),(0,t.Y3)((()=>{_.value.focus()}))},w=()=>{m.value=u.value[d.value]},y=e=>d.value===e,g=()=>{f.value=!0,a({name:"co_loc_focused"})},f=(0,o.iH)(!1),k=[9,13,38,40],q=e=>!k.includes(e),x=async e=>{if(!e?.which||q(e.which)){const e=c.value;if(e?.length<2)return;if(e?.length>10&&!isNaN(e)){const l=e.replace(/^0+/,"").trim(),a=await r({esiid:l});"Inactive"!==a?.status&&(u.value=[a],d.value=0)}else u.value=await s({address:e}),d.value=0}},S=e=>{u.value.length-1>d.value&&(d.value=d.value+1),e.preventDefault()},V=e=>{d.value>0&&(d.value=d.value-1),e.preventDefault()};return{search_input:_,focus:g,focused:f,search_text:c,search:x,is_loading:n,options:u,next_item:S,previous_item:V,selected_index:d,is_active:y,select_item:h,select_active_item:w,remove_service_location:b,service_location:m}}};var b=a(1639),w=a(490),y=a(4458),g=a(6749),f=a(2857),k=a(6611),q=a(3902),x=a(3246),S=a(9984),V=a.n(S);const W=(0,b.Z)(h,[["render",m],["__scopeId","data-v-7a98438c"]]),U=W;V()(h,"components",{QItem:w.Z,QCard:y.Z,QItemSection:g.Z,QIcon:f.Z,QInput:k.Z,QSpinner:q.Z,QList:x.Z});var Z=a(8181),C=a(5190),I=a(6145),Q=a(3483),D=a(8339),j=a(7921);const H=(0,t._)("div",{class:"text-125 text-bold"},"Where do you need electricity delivered?",-1),T={key:0,class:"q-pa-md q-gutter-y-md"},E=(0,t._)("div",{class:"text-bold"},"If you are moving into an apartment:",-1),F=(0,t._)("div",null," Some apartments have different buildings with different street numbers or names. Make sure you are searching for the USPS street name and number for your specific unit. Check your leasing packet or ask your leasing agent for your unit’s mailing address, and search for that. ",-1),L=(0,t._)("div",{class:"text-bold"},"If you already have electricity service at this location:",-1),P=(0,t._)("div",null," Check your electricity bill and type in the exact “ESIID” or service addresss, and search for that. ",-1),Y=(0,t._)("div",{class:"text-bold"},"If you are still unable to find your service address, or cannot find an “ESIID” on your bill: ",-1),$=(0,t._)("div",null,[(0,t.Uk)(" Our system is updated every single day with the latest address information directly from ERCOT (“the Grid”). We strongly support choice for consumers, but sadly not all areas of Texas are eligible for electricity choice. "),(0,t._)("a",{href:"https://comparepower.com/texas-municipal-utilities-electric-coops/"},"Click here for more information on that.")],-1),z=[E,F,L,P,Y,$],K={class:"full-width"},O=(0,t._)("div",{class:"text-100 text-bold"},"What type of home is this service for?",-1),A=(0,t._)("div",{class:"text-100 text-bold"},"Do you own or rent?",-1),N={__name:"ServiceLocation",setup(e){const{log_event:l}=(0,i.Z)(),{selected_plan:a}=(0,C.Z)(),{get_tdsp_name_by_duns:c}=(0,I.Z)(),{plan_to_ecommerce:u}=(0,Q.Z)(),d=(0,D.tv)(),{service_location_loading:_,property_type:m,owns_property:p,service_location:h,duns_match:b,is_residential:w,meter_requirement_match:y,has_switch_hold:g,service_location_valid:f}=(0,v.Z)();(0,t.bv)((()=>{E(),l({name:"co_begin_checkout"}),l({name:"begin_checkout",keep_name:!0,ecommerce:{items:[u({plan:a.value,sort_index:-1})]}})}));(0,t.Fl)((()=>["Just Energy","Amigo Energy","Tara Energy"].includes(a.value.product.brand.name)));const k=(0,o.iH)(null),q=(0,o.iH)(!1),x=(0,o.iH)(null),S=(0,t.Fl)((()=>!!m.value&&"boolean"===typeof p.value&&f.value)),V=()=>{m.value=null,p.value=null},W=async()=>{if(k.value){let e=await k.value.validate();e&&S.value&&(j.m.value.service_location=h.value,j.m.value.meta_data.property_type=m.value,j.m.value.meta_data.owns_property=p.value,l({name:"co_loc_continue",cp_cart:j.m.value}),d.push("/order/start_date"))}};(0,t.YP)([h],(()=>{x.value=null,E(),x.value&&(w.value?g.value?l({name:"co_loc_err_switch_hold"}):b.value?y.value||l({name:"co_loc_err_meter_req"}):l({name:"co_loc_err_duns_match"}):l({name:"co_loc_err_non_resi"})),l({name:"co_loc_selected",service_location:h.value})}));const E=()=>{w.value?g.value?x.value=L():b.value?y.value||(x.value=Y()):x.value=P():x.value=F()},F=()=>({type:"warning",header:"This service address is listed as a business or commercial premise.",lines:[`You can either shop business plans or learn more about correcting the premise type with ${c(h.value?.duns)}.`],buttons:[{btn_icon:"east",btn_label:"Shop Business Plans",btn_background_color:"bg-warning",btn_text_color:"text-white",btn_click:()=>{window.location.href="https://business.comparepower.com?utm_source=residential-enrollment"}},{btn_icon:"east",btn_label:"Learn more",btn_background_color:"bg-warning",btn_text_color:"text-white",btn_click:()=>{window.location.href="https://comparepower.com/address-labeled-a-business/"}}]}),L=()=>({type:"negative",header:"The service location you selected has a switch hold.",lines:["No energy company will take an order at this service location until this switch-hold has been released."],buttons:[{btn_icon:"east",btn_label:"Learn how to lift a switch hold",btn_background_color:"bg-negative",btn_text_color:"white",btn_click:()=>{window.location.href="https://comparepower.com/switch-holds/"}}]}),P=()=>({type:"warning",header:`Your selected plan is valid for service addresses in the ${a.value.tdsp.short_name} area.`,lines:[`View ${c(h.value?.duns)} plans or update your service address.`],buttons:[{btn_icon:"east",btn_label:`View ${c(h.value?.duns)} Plans`,btn_background_color:"bg-warning",btn_text_color:"white",btn_click:()=>{d.push(`/?zip_code=${h.value?.zip_code}&tdsp_duns=${h?.value.duns}`)}}]}),Y=()=>({type:"warning",header:"The plan you selected requires a smart meter.",lines:["The service address you entered does not have a smart meter.","Either select a new plan or change your service address."],buttons:[{btn_icon:"east",btn_label:"Show non-smart meter plans",btn_background_color:"bg-warning",btn_text_color:"white",btn_click:()=>{d.push("/?only_time_of_use=false&only_no_deposit=true")}}]});return(e,l)=>{const a=(0,t.up)("q-spinner-gears"),i=(0,t.up)("q-inner-loading"),c=(0,t.up)("q-btn"),u=(0,t.up)("q-field"),d=(0,t.up)("q-card-section"),v=(0,t.up)("q-radio"),b=(0,t.up)("q-space"),w=(0,t.up)("q-card-actions"),y=(0,t.up)("q-form"),g=(0,t.up)("q-card");return(0,t.wg)(),(0,t.j4)((0,o.SU)(r.Z),{step:"address"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{flat:"",bordered:"",class:"q-pa-md q-pa-sm-xl more-rounded-borders"},{default:(0,t.w5)((()=>[(0,t.Wm)(Z.Z,{clear:"",type:"black",icon:"home",header:"Service Location",lines:["You’re right on track!","Let's confirm that this plan is available at your address."]},null,8,["lines"]),(0,t.Wm)(y,{ref_key:"service_location_form",ref:k,onSubmit:l[9]||(l[9]=(0,n.iM)((()=>{}),["prevent"]))},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{class:"q-px-none q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{showing:(0,o.SU)(_)},{default:(0,t.w5)((()=>[(0,t.Wm)(a,{size:"50px",color:"primary"})])),_:1},8,["showing"]),H,(0,t.Wm)(c,{flat:"",color:"primary","no-caps":"",label:"Having trouble finding your service location?",class:"q-mt-sm",padding:"0px","icon-right":"expand_more",onClick:l[0]||(l[0]=e=>q.value=!q.value)}),q.value?((0,t.wg)(),(0,t.iD)("div",T,z)):(0,t.kq)("",!0),(0,t.Wm)(u,{modelValue:(0,o.SU)(h),"onUpdate:modelValue":l[2]||(l[2]=e=>(0,o.dq)(h)?h.value=e:null),rules:[e=>!!e||"Select a service location"],borderless:""},{control:(0,t.w5)((()=>[(0,t._)("div",K,[(0,t.Wm)(U,{modelValue:(0,o.SU)(h),"onUpdate:modelValue":[l[1]||(l[1]=e=>(0,o.dq)(h)?h.value=e:null),V]},null,8,["modelValue"])])])),_:1},8,["modelValue","rules"]),x.value?((0,t.wg)(),(0,t.j4)(Z.Z,{key:1,type:x.value.type,header:x.value.header,lines:x.value.lines,buttons:x.value.buttons},null,8,["type","header","lines","buttons"])):(0,t.kq)("",!0),(0,o.SU)(h)&&!x.value?((0,t.wg)(),(0,t.j4)(Z.Z,{key:2,type:"positive",header:"This plan is available!",lines:["We have confirmed this plan is available at:",`${(0,o.SU)(h).label}`]},null,8,["lines"])):(0,t.kq)("",!0)])),_:1}),(0,o.SU)(f)?((0,t.wg)(),(0,t.j4)(d,{key:0,class:"q-px-none q-my-none q-py-sm"},{default:(0,t.w5)((()=>[O,(0,t.Wm)(u,{modelValue:(0,o.SU)(m),"onUpdate:modelValue":l[5]||(l[5]=e=>(0,o.dq)(m)?m.value=e:null),class:"q-pa-none",rules:[e=>["apartment","house"].includes(e)||"Please select an option to continue"]},{control:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Wm)(v,{modelValue:(0,o.SU)(m),"onUpdate:modelValue":l[3]||(l[3]=e=>(0,o.dq)(m)?m.value=e:null),label:"Apartment / Condo",val:"apartment"},null,8,["modelValue"])]),(0,t._)("div",null,[(0,t.Wm)(v,{modelValue:(0,o.SU)(m),"onUpdate:modelValue":l[4]||(l[4]=e=>(0,o.dq)(m)?m.value=e:null),label:"House / Townhome",val:"house"},null,8,["modelValue"])])])),_:1},8,["modelValue","rules"])])),_:1})):(0,t.kq)("",!0),(0,o.SU)(f)&&(0,o.SU)(m)?((0,t.wg)(),(0,t.j4)(d,{key:1,class:"q-px-none q-my-none q-py-sm"},{default:(0,t.w5)((()=>[A,(0,t.Wm)(u,{modelValue:(0,o.SU)(p),"onUpdate:modelValue":l[8]||(l[8]=e=>(0,o.dq)(p)?p.value=e:null),rules:[e=>"boolean"===typeof e||"Please select an option to continue"]},{control:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Wm)(v,{modelValue:(0,o.SU)(p),"onUpdate:modelValue":l[6]||(l[6]=e=>(0,o.dq)(p)?p.value=e:null),label:"Rent",val:!1},null,8,["modelValue"])]),(0,t._)("div",null,[(0,t.Wm)(v,{modelValue:(0,o.SU)(p),"onUpdate:modelValue":l[7]||(l[7]=e=>(0,o.dq)(p)?p.value=e:null),label:"Own",val:!0},null,8,["modelValue"])])])),_:1},8,["modelValue","rules"])])),_:1})):(0,t.kq)("",!0),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(b),(0,t.Wm)(c,{unelevated:"",class:"text-bold rounded-borders-10",padding:"10px 25px",color:(0,o.SU)(S)?"secondary":"grey",style:(0,s.j5)((0,o.SU)(S)?"cursor: pointer":"cursor: not-allowed"),label:"Continue","icon-right":"east","no-caps":"",onClick:W},null,8,["color","style"])])),_:1})])),_:1},512)])),_:1})])),_:1})}}};var R=a(8326),B=a(3190),G=a(854),M=a(9120),J=a(8879),X=a(8149),ee=a(1480),le=a(1821),ae=a(136);const te=N,oe=te;V()(N,"components",{QCard:y.Z,QForm:R.Z,QCardSection:B.Z,QInnerLoading:G.Z,QSpinnerGears:M.Z,QBtn:J.Z,QField:X.Z,QRadio:ee.Z,QCardActions:le.Z,QSpace:ae.Z})}}]);
//# sourceMappingURL=56.45a62b28.js.map