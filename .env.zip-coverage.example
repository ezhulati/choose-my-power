# ZIP Coverage System Environment Variables
# Copy this file to .env.local and configure for your environment

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL database connection (required)
DATABASE_URL=postgresql://user:password@localhost:5432/chooseMypower
# Alternative Neon/Vercel format
# POSTGRES_URL=postgresql://user:password@host/database?sslmode=require

# Database connection settings
ZIP_COVERAGE_MAX_DB_CONNECTIONS=10
ZIP_COVERAGE_DB_QUERY_TIMEOUT=30000

# =============================================================================
# CACHE CONFIGURATION (REDIS)
# =============================================================================
# Redis connection for caching
REDIS_URL=redis://localhost:6379

# Cache TTL settings (in seconds)
ZIP_COVERAGE_CACHE_TTL_ZIP=86400      # ZIP lookups (24 hours)
ZIP_COVERAGE_CACHE_TTL_CITY=604800    # City territories (7 days)
ZIP_COVERAGE_CACHE_TTL_TDSP=2592000   # TDSP info (30 days)
ZIP_COVERAGE_CACHE_TTL_LOG=3600       # Validation logs (1 hour)

# =============================================================================
# EXTERNAL API CONFIGURATION
# =============================================================================

# ERCOT (Electric Reliability Council of Texas) API
ERCOT_API_ENDPOINT=https://www.ercot.com/mktrpt/mis
ERCOT_API_KEY=your_ercot_api_key_if_required
ERCOT_RATE_LIMIT_HOUR=100
ERCOT_RATE_LIMIT_DAY=1000
ERCOT_API_TIMEOUT=30000

# PUCT (Public Utility Commission of Texas) API
PUCT_API_ENDPOINT=https://www.puc.texas.gov/industry/electric/directories/rep
PUCT_API_KEY=your_puct_api_key_if_required
PUCT_RATE_LIMIT_HOUR=50
PUCT_RATE_LIMIT_DAY=500
PUCT_API_TIMEOUT=30000

# USPS Address/ZIP Validation API (REQUIRED)
USPS_API_ENDPOINT=https://secure.shippingapis.com/ShippingAPI.dll
USPS_API_KEY=your_usps_api_key_required
USPS_RATE_LIMIT_HOUR=5000
USPS_RATE_LIMIT_DAY=50000
USPS_API_TIMEOUT=10000

# =============================================================================
# TDSP (TRANSMISSION & DISTRIBUTION SERVICE PROVIDER) APIs
# =============================================================================

# Oncor Electric Delivery (serves Dallas, Fort Worth, East Texas)
ONCOR_API_ENDPOINT=https://www.oncor.com/api/territory
ONCOR_API_KEY=your_oncor_api_key
ONCOR_RATE_LIMIT_HOUR=1000
ONCOR_RATE_LIMIT_DAY=10000
ONCOR_API_TIMEOUT=15000

# CenterPoint Energy (serves Houston, Southeast Texas)
CENTERPOINT_API_ENDPOINT=https://www.centerpointenergy.com/api/territory
CENTERPOINT_API_KEY=your_centerpoint_api_key
CENTERPOINT_RATE_LIMIT_HOUR=1000
CENTERPOINT_RATE_LIMIT_DAY=10000
CENTERPOINT_API_TIMEOUT=15000

# AEP Texas North Company (serves West Texas)
AEP_NORTH_API_ENDPOINT=https://www.aeptexas.com/api/territory/north
AEP_NORTH_API_KEY=your_aep_north_api_key
AEP_NORTH_RATE_LIMIT_HOUR=500
AEP_NORTH_RATE_LIMIT_DAY=5000
AEP_NORTH_API_TIMEOUT=20000

# AEP Texas Central Company (serves Central Texas)
AEP_CENTRAL_API_ENDPOINT=https://www.aeptexas.com/api/territory/central
AEP_CENTRAL_API_KEY=your_aep_central_api_key
AEP_CENTRAL_RATE_LIMIT_HOUR=500
AEP_CENTRAL_RATE_LIMIT_DAY=5000
AEP_CENTRAL_API_TIMEOUT=20000

# Texas-New Mexico Power Company (serves South Texas)
TNMP_API_ENDPOINT=https://www.tnmp.com/api/territory
TNMP_API_KEY=your_tnmp_api_key
TNMP_RATE_LIMIT_HOUR=500
TNMP_RATE_LIMIT_DAY=5000
TNMP_API_TIMEOUT=20000

# =============================================================================
# DATA SYNCHRONIZATION CONFIGURATION
# =============================================================================

# Sync schedule settings
ZIP_COVERAGE_SYNC_FREQUENCY=daily              # daily, weekly, monthly
ZIP_COVERAGE_SYNC_TIME=02:00                   # HH:MM format (2 AM)
ZIP_COVERAGE_SYNC_BATCH_SIZE=100               # ZIP codes per batch
ZIP_COVERAGE_SYNC_MAX_RETRIES=3                # Max retry attempts
ZIP_COVERAGE_SYNC_BACKOFF=2.0                  # Exponential backoff multiplier

# Comma-separated list of enabled data sources
ZIP_COVERAGE_ENABLED_SOURCES=ercot,puct,oncor,centerpoint,aep_north,aep_central,tnmp,usps

# =============================================================================
# PERFORMANCE AND QUALITY TARGETS
# =============================================================================

# Concurrency and performance
ZIP_COVERAGE_MAX_CONCURRENT=10                 # Max concurrent API requests
ZIP_COVERAGE_RESPONSE_TIME_TARGET=200          # Response time target (ms)
ZIP_COVERAGE_ACCURACY_TARGET=99                # Data accuracy target (%)
ZIP_COVERAGE_CACHE_HIT_TARGET=85               # Cache hit rate target (%)

# =============================================================================
# DEVELOPMENT AND TESTING CONFIGURATION
# =============================================================================

# Development settings
ZIP_COVERAGE_ENABLE_MOCK_DATA=false            # Use mock data for testing
ZIP_COVERAGE_LOG_LEVEL=info                    # error, warn, info, debug
ZIP_COVERAGE_DETAILED_LOGGING=false            # Enable detailed API logging
ZIP_COVERAGE_TEST_DATA_SOURCE=false            # Use test data sources

# =============================================================================
# PRODUCTION RECOMMENDATIONS
# =============================================================================
# 
# For production deployment:
# 1. Set ZIP_COVERAGE_LOG_LEVEL=warn or error
# 2. Set ZIP_COVERAGE_DETAILED_LOGGING=false
# 3. Set ZIP_COVERAGE_ENABLE_MOCK_DATA=false
# 4. Configure proper API keys for all enabled sources
# 5. Set realistic rate limits based on your API plans
# 6. Use production Redis instance with proper persistence
# 7. Set ZIP_COVERAGE_ACCURACY_TARGET=99.9 for highest quality
# 8. Monitor cache hit rates and adjust TTL settings accordingly
#
# API Key Requirements:
# - USPS_API_KEY: Required for ZIP validation (free but registration needed)
# - TDSP API keys: Contact each utility for access to territory APIs
# - ERCOT/PUCT: May require registration for bulk data access
#
# =============================================================================